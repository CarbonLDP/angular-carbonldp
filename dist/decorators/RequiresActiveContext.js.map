{"version":3,"sources":["decorators/RequiresActiveContext.ts"],"names":[],"mappings":";;;;;;AAAA,kCAA2C,4BAA4B,CAAC,CAAA;AAExE,qBAAoC,WAAW,CAAC,CAAA;AAChD,2CAAyC,8BAA8B,CAAC,CAAA;AACxE,iCAAgD,oBAAoB,CAAC,CAAA;AAErE;IAA8C,mDAA0B;IACvE,yCAAa,OAA6B;QACzC,iBAAO,CAAC;QACR,IAAI,CAAC,QAAQ,GAAG,UAAU,IAAyB,EAAE,QAA6B;YACjF,IAAI,MAAM,GAAU,aAAM,CAAE,0BAAM,CAAE,CAAC;YAErC,MAAM,CAAC,oBAAa,CAAC,OAAO,CAAC,IAAI,CAAE;gBAClC,MAAM,CAAC,IAAI,CAAC;YACb,CAAC,CAAC,CAAC,KAAK,CAAE,UAAE,KAAK;gBAChB,MAAM,CAAC,QAAQ,CAAE,OAAO,CAAC,UAAU,CAAE,CAAC;gBACtC,MAAM,CAAC,KAAK,CAAC;YACd,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC;IACH,CAAC;IACF,sCAAC;AAAD,CAdA,AAcC,CAd6C,uDAA0B,GAcvE;AAEU,6BAAqB,GAAwD,oDAAiC,CAAE,+BAA+B,CAAE,CAAC","file":"decorators/RequiresActiveContext.js","sourcesContent":["import {Router, ComponentInstruction} from \"@angular/router-deprecated\";\n\nimport {inject, activeContext} from \"./../boot\";\nimport {AbstractSecurityAnnotation} from \"./AbstractSecurityAnnotation\";\nimport {makeCanActivateChainableDecorator} from \"./CanActivateUtils\";\n\nclass RequiresActiveContextAnnotation extends AbstractSecurityAnnotation {\n\tconstructor( options:{ redirectTo: any[] } ) {\n\t\tsuper();\n\t\tthis.evaluate = function( next:ComponentInstruction, previous:ComponentInstruction ):Promise<boolean> | boolean {\n\t\t\tlet router:Router = inject( Router );\n\n\t\t\treturn activeContext.promise.then( () => {\n\t\t\t\treturn true;\n\t\t\t}).catch( ( error ) => {\n\t\t\t\trouter.navigate( options.redirectTo );\n\t\t\t\treturn false;\n\t\t\t});\n\t\t};\n\t}\n}\n\nexport let RequiresActiveContext: ( options:{ redirectTo: any[] } ) => ClassDecorator = makeCanActivateChainableDecorator( RequiresActiveContextAnnotation );\n"],"sourceRoot":"/source/"}