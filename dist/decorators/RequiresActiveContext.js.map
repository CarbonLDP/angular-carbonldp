{"version":3,"sources":["decorators/RequiresActiveContext.ts"],"names":[],"mappings":";AAAA,kCAA6C,4BAA4B,CAAC,CAAA;AAE1E,qBAAsC,WAAW,CAAC,CAAA;AAElD,iCAAkD,oBAAoB,CAAC,CAAA;AAEvE;IAGC,yCAAa,OAA4B;QACxC,IAAI,CAAC,QAAQ,GAAG,UAAW,IAAyB,EAAE,QAA6B;YAClF,IAAI,MAAM,GAAU,aAAM,CAAE,0BAAM,CAAE,CAAC;YAErC,MAAM,CAAC,oBAAa,CAAC,OAAO,CAAC,IAAI,CAAE;gBAClC,MAAM,CAAC,IAAI,CAAC;YACb,CAAC,CAAE,CAAC,KAAK,CAAE,UAAE,KAAK;gBACjB,MAAM,CAAC,QAAQ,CAAE,OAAO,CAAC,UAAU,CAAE,CAAC;gBACtC,MAAM,CAAC,KAAK,CAAC;YACd,CAAC,CAAE,CAAC;QACL,CAAC,CAAC;IACH,CAAC;IACF,sCAAC;AAAD,CAfA,AAeC,IAAA;AAEU,6BAAqB,GAAsD,oDAAiC,CAAE,+BAA+B,CAAE,CAAC","file":"decorators/RequiresActiveContext.js","sourcesContent":["import { Router, ComponentInstruction } from \"@angular/router-deprecated\";\n\nimport { inject, activeContext } from \"./../boot\";\nimport { SecurityAnnotation } from \"./SecurityAnnotation\";\nimport { makeCanActivateChainableDecorator } from \"./CanActivateUtils\";\n\nclass RequiresActiveContextAnnotation implements SecurityAnnotation {\n\tevaluate:( next:ComponentInstruction, previous:ComponentInstruction ) => Promise<boolean> | boolean;\n\n\tconstructor( options:{ redirectTo:any[] } ) {\n\t\tthis.evaluate = function ( next:ComponentInstruction, previous:ComponentInstruction ):Promise<boolean> | boolean {\n\t\t\tlet router:Router = inject( Router );\n\n\t\t\treturn activeContext.promise.then( () => {\n\t\t\t\treturn true;\n\t\t\t} ).catch( ( error ) => {\n\t\t\t\trouter.navigate( options.redirectTo );\n\t\t\t\treturn false;\n\t\t\t} );\n\t\t};\n\t}\n}\n\nexport let RequiresActiveContext:( options:{ redirectTo:any[] } ) => ClassDecorator = makeCanActivateChainableDecorator( RequiresActiveContextAnnotation );\n"],"sourceRoot":"/source/"}